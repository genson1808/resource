
@startuml
actor リーダー as "リーダー"
actor 顧客 as "顧客"

participant GUI as "GUI"
participant ライブラリ as "ライブラリ"
participant NDIチェッカー as "NDIチェッカー"
participant ファイルシステム as "ファイルシステム"

リーダー -> GUI : 製品コード、MACアドレス、有効期限を入力

alt 製品コードの選択
    GUI -> GUI : ドロップダウンで製品コードを表示
    リーダー -> GUI : ドロップダウンから製品コードを選択
else 製品コードの入力
    リーダー -> GUI : 製品コードを入力
    GUI -> GUI : 製品コードを検証
    alt 製品コードが無効
        GUI -> リーダー : エラーメッセージを表示 (無効な製品コード)
    end
end

alt MACアドレスの検証
    リーダー -> GUI : MACアドレスを入力
    GUI -> GUI : MACアドレスを検証
    alt MACアドレスが無効
        GUI -> リーダー : エラーメッセージを表示 (無効なMACアドレス)
    end
end

alt 有効期限の選択
    GUI -> GUI : ドロップダウンで有効期限を表示
    リーダー -> GUI : ドロップダウンから有効期限を選択
else 有効期限の入力
    リーダー -> GUI : 有効期限を入力
    GUI -> GUI : 有効期限を検証
    alt 有効期限が無効
        GUI -> リーダー : エラーメッセージを表示 (無効な有効期限)
    end
end

opt すべてのデータが有効
    GUI -> ライブラリ : 製品コード、MACアドレス、有効期限を送信
    ライブラリ -> ライブラリ : 公開鍵、秘密鍵、ライセンスファイルを生成
    ライブラリ -> GUI : 公開鍵、秘密鍵、ライセンスファイルを返す
    GUI -> ファイルシステム : 公開鍵、秘密鍵、ライセンスファイルをフォルダに保存
    GUI -> 顧客 : 公開鍵、ライセンスファイルを送信

    顧客 -> NDIチェッカー : 公開鍵、ライセンスファイルを入力
    NDIチェッカー -> ライブラリ : 公開鍵、ライセンスファイル、製品コードを送信
    ライブラリ -> NDIチェッカー : ライセンスを検証
    alt ライセンスが有効
        NDIチェッカー -> 顧客 : 有効な通知を表示
    else ライセンスが無効
        NDIチェッカー -> 顧客 : 無効な通知を表示
    end
end
@enduml
